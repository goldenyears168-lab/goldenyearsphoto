/* ==================================================
 * Price List Page - Page-Specific Overrides
 * 
 * Note: All card styles come from .card base in 3-components/_k-card.scss
 * This file only contains page-specific layout adjustments.
 * Visual styling (smoked glass, gold border) comes from tokens.
 * ================================================== */

@layer pages {
  
  /* Price Page Card Wrapper - Page-specific spacing */
  .price-page__card,
  .price-page__card--service,
  .price-page__card--makeup {
    margin-bottom: var(--space-10);
    
    &:last-child {
      margin-bottom: 0;
    }
  }
  
  /* Price Page - Specific card modifiers (only layout adjustments) */
  .price-page .card--service {
    /* Only page-specific adjustments, not full card definition */
    /* Visual styling (smoked glass, gold border) comes from .card base */
  }

  /* Price Page - Card element overrides (if needed) */
  .price-page__card .card__title {
    /* Only if page-specific title styling is needed */
    /* Use tokens for colors: var(--color-text-heading) */
  }

  .price-page__card .card__price {
    /* Only if page-specific price styling is needed */
    /* Use tokens for colors: var(--color-brand-glow) */
  }

  /* ========= 區塊副標題：服務包含 / 升級選項 ========= */
  .price-section-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-muted);
    margin: var(--space-7) 0 var(--space-2) 0;
    border-bottom: 1px solid var(--color-border-subtle);
    padding-bottom: var(--space-2);
  }

  /* ========= 價格列表（服務包含 / 升級 / 妝髮通用基底） ========= */
  .price-list {
    list-style: none;
    padding-left: 0;
    margin: 0 0 var(--space-5) 0;
  }

  .price-list__item {
    position: relative;
    padding-left: var(--space-7);
    margin-bottom: var(--space-3);
    line-height: var(--line-height-relaxed);
    font-size: var(--font-size-base);
    color: var(--color-text-body);
  }

  /* 服務包含項目（✓） */
  .price-list--includes .price-list__item::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: var(--color-brand-glow);
    font-weight: var(--font-weight-bold);
    font-size: 1.2rem;
  }

  /* 升級項目（➕） */
  .price-list--upgrades .price-list__item::before {
    content: "➕";
    position: absolute;
    left: 0;
    top: 2px;
    color: var(--color-brand-primary);
  }

  /* 妝髮項目：文字稍微放大，無 icon */
  .price-list--makeup .price-list__item {
    font-size: 1.1rem;
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-loose);
    padding-left: 0;      /* 不需要 icon，去掉縮排 */
  }

  /* ========= 價目表頁面專用的圖片畫廊樣式 ========= */
  
  /* Key fix: Override .card overflow: hidden for price gallery */
  .card.card--service.card--split,
  .card:has(.price-gallery) {
    overflow: visible !important;
  }

  /* Override split card min-height restriction */
  .card--split {
    @media (min-width: 768px) {
      min-height: 0 !important;
      align-items: flex-start !important;
      
      .card__media {
        align-self: auto !important;
        height: auto !important;
        min-height: 0 !important;
        max-height: none !important;
      }
    }
  }

  /* Price gallery media - Remove fixed height restrictions */
  .card__media.price-gallery,
  .price-page__card--makeup .price-gallery {
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
    align-self: auto !important;
    
    > * {
      height: auto !important;
    }
    
    img {
      height: auto !important;
      max-height: none !important;
    }
    
    @media (min-width: 768px) {
      height: auto !important;
      min-height: 0 !important;
      max-height: none !important;
      align-self: auto !important;
      
      img {
        height: auto !important;
        max-height: none !important;
      }
    }
    
    @media (min-width: 992px) {
      img {
        height: auto !important;
        max-height: none !important;
      }
    }
  }

  /* Price Gallery - Image and caption container */
  .price-gallery {
    gap: var(--space-4);
    align-items: stretch;
    align-content: start;
  }

  /* Price Gallery Item - Each image with caption (extends .card) */
  .price-gallery__item {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    width: 100%;
    
    /* Extends .card base - only override what's needed */
    overflow: visible;
    
    /* Use tokens for shadows */
    box-shadow: var(--shadow-card), var(--shadow-glow);
    
    &:hover {
      box-shadow: var(--shadow-card-hover), var(--shadow-glow);
    }
    
    /* Image container area */
    img {
      width: 100%;
      height: auto !important;
      max-width: 100%;
      max-height: 200px; /* Mobile */
      object-fit: contain !important;
      object-position: center center;
      display: block;
      background-color: var(--color-surface-card);
      padding: var(--space-3);
      box-sizing: border-box;
      flex-shrink: 0;
    }
    
    /* Responsive image height */
    @media (min-width: 768px) {
      img {
        max-height: 260px;
      }
    }
    
    @media (min-width: 992px) {
      img {
        max-height: 300px;
      }
    }
  }

  /* Price Gallery caption */
  .price-gallery__caption {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-muted);
    text-align: center;
    margin: 0;
    padding: var(--space-3) var(--space-2);
    line-height: var(--line-height-normal);
    background-color: var(--color-surface-card); /* 柔白背景 */
    background-image: var(--texture-paper); /* 淡淡紙紋紋理 */
    background-size: cover; /* 覆蓋整個 caption */
    background-position: center;
    background-repeat: no-repeat;
    background-blend-mode: overlay; /* 淡淡混合，不明顯 */
    flex-shrink: 0;
  }

  /* Respect user's animation preferences */
  @media (prefers-reduced-motion: reduce) {
    .price-gallery__item {
      transition: box-shadow var(--transition-hover);
      transform: none;
      
      &:hover {
        transform: none;
      }
    }
  }

}
