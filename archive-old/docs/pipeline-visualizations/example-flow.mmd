flowchart TD
    Start([請求進入]) --> N1[validateRequest]
    N1 --> N2[initializeServices]
    N2 --> N3[contextManagement]
    N3 --> N4[intentExtraction]
    N4 --> N5[stateTransition]
    N5 --> N6[specialIntents]
    N6 --> N7[faqCheck]
    N7 --> N8[llmGeneration]
    N8 --> N9[buildResponse]
    N9 --> End([返回響應])
    style N1 fill:#90caf9
    style N2 fill:#90caf9
    style N3 fill:#90caf9
    style N4 fill:#90caf9
    style N5 fill:#90caf9
    style N6 fill:#90caf9
    style N7 fill:#90caf9
    style N8 fill:#90caf9
    style N9 fill:#90caf9
    style Start fill:#e1f5ff
    style End fill:#d4edda
