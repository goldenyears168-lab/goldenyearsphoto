{#
  Textarea Macro
  
  Creates a standardized textarea component.
  
  Parameters:
    - name: Textarea name attribute
    - id: Textarea id attribute (optional, defaults to name)
    - label: Label text (optional)
    - placeholder: Placeholder text (optional)
    - value: Textarea value (optional)
    - rows: Number of rows (default: 4)
    - required: Whether field is required (default: false)
    - disabled: Whether field is disabled (default: false)
    - class: Additional CSS classes (optional)
    - error: Error message to display (optional)
    - help: Help text to display (optional)
  
  Usage:
    {% from "macros/textarea.njk" import textarea %}
    {{ textarea("message", "user-message", "訊息", "請輸入您的訊息", "", 5, true) }}
#}

{% macro textarea(name, id='', label='', placeholder='', value='', rows=4, required=false, disabled=false, class='', error='', help='') %}
  {% set textareaId = id or name %}
  {% set textareaClasses = ['w-full px-4 py-3 border border-sand-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900 focus:border-transparent transition-colors resize-y', class] | join(' ') | trim %}
  
  <div class="mb-4">
    {% if label %}
      <label for="{{ textareaId }}" class="block text-sm font-medium text-trust-900 mb-2">
        {{ label }}
        {% if required %}<span class="text-error">*</span>{% endif %}
      </label>
    {% endif %}
    
    <textarea
      name="{{ name }}"
      id="{{ textareaId }}"
      rows="{{ rows }}"
      {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
      {% if required %}required{% endif %}
      {% if disabled %}disabled{% endif %}
      class="{{ textareaClasses }}"
      {% if error %}aria-invalid="true" aria-describedby="{{ textareaId }}-error"{% endif %}
    >{{ value }}</textarea>
    
    {% if error %}
      <p id="{{ textareaId }}-error" class="mt-1 text-sm text-error" role="alert">
        {{ error }}
      </p>
    {% endif %}
    
    {% if help and not error %}
      <p class="mt-1 text-sm text-slate-500">
        {{ help }}
      </p>
    {% endif %}
  </div>
{% endmacro %}

