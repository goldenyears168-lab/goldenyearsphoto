---
layout: "base-layout.njk"
title: "身份原型測驗｜好時有影"
pageStyles: |
  <link rel="stylesheet" href="/assets/css/4-pages/p-identity-test.css">
seo:
  description: "5 題找出你的專業氣質，發現你的身份原型。RIASEC 六種人格類型 身份原型測驗。"
permalink: "/guide/identity-test/"
---

{# Access data from _data/identityTest.json #}
{# Force using readJSON filter to ensure data loads #}
{% set data = 'identityTest.json' | readJSON %}
{% if not data or not data.hero %}
  {# Fallback: Try global variable #}
  {% if identityTest and identityTest.hero %}
    {% set data = identityTest %}
  {% endif %}
{% endif %}

<main class="identity-test">
  <!-- Hero Section -->
  <section id="hero" class="hero">
    <div class="container">
      {% if data and data.hero %}
      <h1 class="hero-title">{{ data.hero.title }}</h1>
      <p class="hero-subtitle">{{ data.hero.subtitle }}</p>
      <p class="hero-description">{{ data.hero.description }}</p>
      
      <button id="start-btn" class="btn-primary" type="button">{{ data.hero.cta }}</button>
      
      <!-- Type Cards Preview -->
      <div class="type-cards-preview">
        {% for typeKey, typeData in data.types %}
        <div class="type-card-mini" data-type="{{ typeKey }}">
          <span class="type-icon">{{ typeData.icon }}</span>
          <span class="type-name">{{ typeData.name }}</span>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div style="color: red; padding: 20px; text-align: center;">
        <p>錯誤：無法載入測驗資料。請檢查資料檔案。</p>
        <p>Debug: data = {{ data | tojson }}</p>
      </div>
      {% endif %}
    </div>
  </section>

  <!-- Quiz Section -->
  <section id="quiz" class="quiz hidden">
    <!-- Progress Bar - Fixed at top -->
    <div class="progress-bar-fixed">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="container">
      <!-- Question Container -->
      <div class="question-container" id="question-container">
        <h2 class="question-title" id="question-title"></h2>
        <div class="options-grid" id="options-grid"></div>
      </div>
      
      <!-- Navigation -->
      <div class="quiz-nav">
        <button id="prev-btn" class="btn-secondary" disabled>上一題</button>
        <span class="question-counter">
          <span id="current-question">1</span> / <span id="total-questions">5</span>
        </span>
        <button id="next-btn" class="btn-primary" disabled>下一題</button>
      </div>
    </div>
  </section>

  <!-- Result Section -->
  <section id="result" class="result hidden">
    <div class="container">
      <!-- Result Card -->
      <div class="result-card" id="result-card">
        <div class="result-header">
          <div class="result-icon" id="result-icon"></div>
          <h2 class="result-title" id="result-title"></h2>
          <p class="result-subtitle" id="result-subtitle"></p>
        </div>
        
        <div class="result-content">
          <div class="result-section stagger-item">
            <h3>1. 核心本質</h3>
            <p class="result-narrative" id="result-narrative"></p>
          </div>
          
          <div class="result-section stagger-item">
            <h3>2. 深層心理動力</h3>
            <p class="result-core-drive" id="result-core-drive"></p>
          </div>
          
          <div class="result-section stagger-item">
            <h3>3. 行為特徵</h3>
            <div class="result-behaviors" id="result-behaviors"></div>
          </div>
          
          <div class="result-section stagger-item">
            <h3>4. 團隊角色原型</h3>
            <p class="result-team-role" id="result-team-role"></p>
          </div>
          
          <div class="result-section stagger-item">
            <h3>5. 最適合你的情境</h3>
            <div class="result-suitable-situations" id="result-suitable-situations"></div>
          </div>
          
          <div class="result-section stagger-item">
            <h3>6. 成長方向</h3>
            <div class="result-growth-direction" id="result-growth-direction"></div>
          </div>
          
          <div class="result-section stagger-item">
            <h3>7. 盲點提醒</h3>
            <div class="result-blind-spots" id="result-blind-spots"></div>
          </div>
          
          <div class="result-section stagger-item">
            <h3>8. 影像姿勢建議</h3>
            <p class="result-action" id="result-action"></p>
          </div>
          
          <div class="result-section stagger-item">
            <h3>分數總覽與人格組合</h3>
            <div class="score-overview" id="score-overview"></div>
            <div class="combination-description" id="combination-description"></div>
          </div>
          
          <!-- User Info Collection Form -->
          <div class="result-section stagger-item user-info-form" id="user-info-form">
            <h3>留下聯絡方式（選填）</h3>
            <p class="form-description">填寫後我們會email給您測驗結果</p>
            <form id="user-info-form-element" class="user-info-form-element">
              <div class="form-group">
                <label for="user-name">姓名</label>
                <input 
                  type="text" 
                  id="user-name" 
                  name="name" 
                  placeholder="您的姓名"
                  class="form-input"
                />
              </div>
              
              <div class="form-group">
                <label for="user-email">Email</label>
                <input 
                  type="email" 
                  id="user-email" 
                  name="email" 
                  placeholder="your@email.com"
                  class="form-input"
                />
              </div>
              
              <button type="submit" class="btn-primary form-submit">儲存資訊</button>
              <button type="button" class="btn-text form-skip" id="skip-user-info">跳過</button>
            </form>
          </div>
        </div>
        
        <!-- CTA Buttons -->
        <div class="result-cta stagger-item">
          <a href="/booking/" class="btn-primary">預約拍攝</a>
        </div>
      </div>
      
      <!-- Restart Button -->
      <button id="restart-btn" class="btn-text">重新開始測驗</button>
    </div>
  </section>
</main>

<!-- Hidden JSON data for JavaScript -->
{% if data and data.hero %}
<script type="application/json" id="quiz-data">{{ data | tojson | safe }}</script>
{% else %}
<script type="application/json" id="quiz-data">null</script>
<script>
  console.error('❌ Quiz data not loaded in template!');
  console.error('Has data:', {{ data != null }});
  console.error('Has hero:', {{ data and data.hero }});
</script>
{% endif %}

<!-- Supabase Configuration (injected before script loads) -->
<script>
  // Inject Supabase config from Eleventy global data
  window.supabaseConfig = {
    url: {{ metadata.supabaseUrl | tojson | safe }},
    anonKey: {{ metadata.supabaseAnonKey | tojson | safe }}
  };
</script>

<!-- JavaScript -->
<script src="/assets/js/identity-test.js"></script>
