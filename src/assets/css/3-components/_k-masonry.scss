/* ==================================================
 * Masonry/Waterfall Layout Component - "Warm Ã— Enterprise" Design System
 * 
 * Beautiful masonry/waterfall layout for portfolio galleries.
 * Uses CSS columns for pure CSS, static-friendly implementation.
 * 
 * Features:
 * - Responsive column count (mobile to desktop)
 * - Preserves original image aspect ratios
 * - Smooth hover effects with subtle lift
 * - Consistent spacing using design tokens
 * ==================================================
 */

@layer components {
  
  /* Masonry Container - CSS columns-based waterfall layout */
  .masonry-layout {
    column-count: 2; /* Mobile: 2 columns */
    column-gap: var(--space-3); /* 12px gap */
    width: 100%;
    margin-block: var(--space-6) var(--space-10);
    
    @media (min-width: 640px) {
      column-count: 3; /* Small tablets: 3 columns */
      column-gap: var(--space-4); /* 16px gap */
    }
    
    @media (min-width: 768px) {
      column-count: 4; /* Tablets: 4 columns */
      column-gap: var(--space-5); /* 20px gap */
    }
    
    @media (min-width: 1024px) {
      column-count: 5; /* Desktop: 5 columns */
      column-gap: var(--space-6); /* 24px gap */
    }
  }
  
  /* Masonry Item - Individual image card in waterfall */
  .masonry-item {
    display: inline-block;
    width: 100%;
    margin-bottom: var(--space-3); /* Vertical gap between items */
    break-inside: avoid; /* Prevent items from breaking across columns */
    page-break-inside: avoid; /* Legacy support */
    border-radius: var(--radius-card); /* 12px rounded corners */
    overflow: hidden;
    background-color: var(--color-surface);
    box-shadow: var(--shadow-card); /* Soft shadow */
    transition: transform var(--transition-smooth),
                box-shadow var(--transition-smooth);
    cursor: pointer;
    /* GPU acceleration for smooth animations */
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    
    @media (min-width: 640px) {
      margin-bottom: var(--space-4); /* 16px vertical gap */
    }
    
    @media (min-width: 768px) {
      margin-bottom: var(--space-5); /* 20px vertical gap */
    }
    
    @media (min-width: 1024px) {
      margin-bottom: var(--space-6); /* 24px vertical gap */
    }
    
    /* Hover state - Subtle lift with enhanced shadow */
    &:hover {
      transform: translate3d(0, -4px, 0);
      box-shadow: var(--shadow-card-hover);
    }
    
    /* Focus state - For keyboard navigation */
    &:focus-visible {
      outline: 3px solid var(--focus-ring);
      outline-offset: 3px;
    }
  }
  
  /* Masonry Item Image - Preserve original aspect ratios
   * Images naturally fill container width while maintaining their aspect ratio */
  .masonry-item img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform var(--transition-smooth),
                opacity var(--transition-smooth);
    /* GPU acceleration */
    transform: translateZ(0);
    will-change: transform, opacity;
  }
  
  /* Enhanced hover effect on image - subtle zoom */
  .masonry-item:hover img {
    transform: scale3d(1.03, 1.03, 1) translateZ(0);
    opacity: 0.96;
  }
  
  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .masonry-item {
      transition: box-shadow var(--transition-smooth);
      transform: none;
      will-change: auto;
      
      &:hover {
        transform: none;
      }
    }
    
    .masonry-item img {
      transition: opacity var(--transition-smooth);
      transform: none;
      will-change: auto;
    }
    
    .masonry-item:hover img {
      transform: none;
      /* Keep opacity change for visual feedback */
      opacity: 0.96;
    }
  }
  
  /* Legacy support - portfolio-wall-grid can use masonry layout */
  .portfolio-wall-grid.masonry-layout {
    /* Remove inline grid styles when masonry class is applied */
    display: block;
  }
  
}

