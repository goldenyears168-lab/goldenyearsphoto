/* ==================================================
 * Identity Test Page - "Warm Ã— Enterprise" Design
 * 
 * RIASEC-based personality archetype quiz system
 * Adapted to existing design system tokens
 * ================================================== */

@layer pages {
  
  /* ============================================
   * Utility Classes
   * ============================================ */
  
  .hidden {
    display: none !important;
  }
  
  .fade-in {
    animation: fadeInUp 0.5s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
  }
  
  .fade-out {
    animation: fadeOutLeft 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
  }
  
  /* ============================================
   * Animations
   * ============================================ */
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes fadeOutLeft {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(-20px);
    }
  }
  
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }
  
  /* ============================================
   * Hero Section
   * ============================================ */
  
  .identity-test {
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-12) var(--space-4);
      background: linear-gradient(135deg, var(--color-surface-2) 0%, var(--color-neutral-100) 100%);
      
      .container {
        text-align: center;
        max-width: var(--container-max-width);
      }
      
      .hero-title {
        font-size: var(--font-size-4xl);
        font-weight: var(--font-weight-bold);
        margin-bottom: var(--space-4);
        color: var(--color-text);
        line-height: var(--line-height-tight);
        
        @media (min-width: 768px) {
          font-size: 3rem; /* 48px */
        }
      }
      
      .hero-subtitle {
        font-size: var(--font-size-xl);
        color: var(--color-text-subtle);
        margin-bottom: var(--space-3);
        font-weight: var(--font-weight-medium);
        
        @media (min-width: 768px) {
          font-size: var(--font-size-2xl);
        }
      }
      
      .hero-description {
        font-size: var(--font-size-lg);
        color: var(--color-text-subtle);
        margin-bottom: var(--space-10);
      }
    }
    
    /* Type Cards Preview */
    .type-cards-preview {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-4);
      margin-top: var(--space-12);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      
      @media (min-width: 640px) {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .type-card-mini {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-3);
      transition: transform var(--transition-hover), box-shadow var(--transition-hover);
      box-shadow: var(--shadow-soft);
      
      &:hover {
        transform: var(--transform-lift-card);
        box-shadow: var(--shadow-hover);
      }
    }
    
    .type-icon {
      font-size: var(--font-size-3xl);
    }
    
    .type-name {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: var(--color-text);
    }
  }
  
  /* ============================================
   * Buttons
   * ============================================ */
  
  .identity-test {
    .btn-primary,
    .btn-secondary,
    .btn-outline,
    .btn-text {
      font-family: var(--font-family-base);
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-semibold);
      padding: var(--space-4) var(--space-8);
      border: none;
      border-radius: var(--radius-button);
      cursor: pointer;
      transition: transform var(--transition-hover), box-shadow var(--transition-hover);
      text-decoration: none;
      display: inline-block;
      text-align: center;
      position: relative;
      overflow: hidden;
      
      &:focus-visible {
        outline: 3px solid var(--focus-ring);
        outline-offset: 3px;
      }
    }
    
    .btn-primary {
      background: var(--color-brand-cta);
      color: var(--color-brand-primary);
      box-shadow: var(--shadow-button);
      
      &:hover:not(:disabled) {
        transform: var(--transform-lift);
        box-shadow: var(--shadow-button-hover);
      }
      
      &:active:not(:disabled) {
        transform: translateY(0) scale(0.98);
      }
      
      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }
    }
    
    .btn-secondary {
      background: var(--color-surface);
      color: var(--color-text);
      border: 1px solid var(--color-border);
      
      &:hover:not(:disabled) {
        transform: var(--transform-lift);
        box-shadow: var(--shadow-md);
      }
      
      &:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }
    }
    
    .btn-outline {
      background: transparent;
      color: var(--color-text);
      border: 2px solid var(--color-text);
      
      &:hover {
        background: var(--color-text);
        color: var(--color-surface);
        transform: var(--transform-lift);
      }
    }
    
    .btn-text {
      background: transparent;
      color: var(--color-text-subtle);
      padding: var(--space-3) var(--space-4);
      
      &:hover {
        color: var(--color-text);
      }
    }
  }
  
  /* ============================================
   * Quiz Section
   * ============================================ */
  
  .identity-test {
    .quiz {
      min-height: 100vh;
      padding: var(--space-12) var(--space-4);
      padding-top: calc(var(--space-12) + 6px); /* Add space for fixed progress bar */
      background: var(--color-surface-2);
      
      .container {
        max-width: var(--container-max-width);
      }
    }
    
    /* Progress Bar - Fixed at top */
    .progress-bar-fixed {
      position: fixed;
      top: var(--header-h);
      left: 0;
      right: 0;
      width: 100%;
      height: 6px;
      background: var(--color-neutral-100);
      z-index: var(--z-index-header-nav);
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--color-brand-cta) 0%, var(--color-brand-cta-hover) 100%);
      transition: width 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
      width: 0%;
      box-shadow: 0 0 8px rgba(208, 215, 241, 0.6);
    }
    
    /* Progress Bar Container (legacy - inside container) */
    .progress-container {
      width: 100%;
      height: 8px;
      background: var(--color-neutral-100);
      border-radius: var(--radius-full);
      overflow: hidden;
      margin-bottom: var(--space-12);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    /* Question Container */
    .question-container {
      margin-bottom: var(--space-12);
    }
    
    .question-title {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-10);
      line-height: var(--line-height-relaxed);
      color: var(--color-text);
      
      @media (min-width: 768px) {
        font-size: var(--font-size-3xl);
      }
    }
    
    /* Options Grid */
    .options-grid {
      display: grid;
      gap: var(--space-4);
      margin-bottom: var(--space-10);
      
      @media (min-width: 640px) {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .option-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      text-align: left;
      cursor: pointer;
      transition: transform var(--transition-hover), box-shadow var(--transition-hover), border-color var(--transition-hover);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(20px);
      
      &.fade-in {
        animation: fadeInUp 0.5s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
      }
      
      &:hover {
        transform: var(--transform-lift-card);
        box-shadow: var(--shadow-hover);
        border-color: var(--color-accent-weak);
      }
      
      &:active {
        transform: translateY(-3px) scale(0.98);
      }
      
      &.selected {
        border-color: var(--color-brand-cta);
        border-width: 2px;
        background: color-mix(in srgb, var(--color-brand-cta) 10%, var(--color-surface));
        box-shadow: 0 0 0 4px color-mix(in srgb, var(--color-brand-cta) 10%, transparent), var(--shadow-hover);
      }
    }
    
    .option-text {
      position: relative;
      z-index: 1;
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      color: var(--color-text);
      line-height: var(--line-height-relaxed);
    }
    
    /* Quiz Navigation */
    .quiz-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-4);
      flex-wrap: wrap;
    }
    
    .question-counter {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-subtle);
      padding: var(--space-3) var(--space-4);
      background: var(--color-surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
    }
    
    @media (max-width: 640px) {
      .quiz-nav {
        flex-direction: column;
      }
      
      .quiz-nav .btn-primary,
      .quiz-nav .btn-secondary {
        width: 100%;
      }
    }
  }
  
  /* ============================================
   * Result Section
   * ============================================ */
  
  .identity-test {
    .result {
      min-height: 100vh;
      padding: var(--space-12) var(--space-4);
      background: linear-gradient(135deg, var(--color-surface-2) 0%, var(--color-neutral-100) 100%);
      
      .container {
        max-width: 800px;
      }
    }
    
    .result-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-12);
      box-shadow: var(--shadow-soft);
      margin: 0 auto;
      margin-bottom: var(--space-10);
      border-top: 4px solid var(--type-color, var(--color-text));
    }
    
    .result-header {
      text-align: center;
      margin-bottom: var(--space-12);
    }
    
    .result-icon {
      font-size: 5rem;
      margin-bottom: var(--space-6);
      display: block;
      animation: pulse 2s ease-in-out infinite;
    }
    
    .result-title {
      font-size: var(--font-size-3xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-3);
      color: var(--color-text);
    }
    
    .result-subtitle {
      font-size: var(--font-size-lg);
      color: var(--color-text-subtle);
      font-weight: var(--font-weight-medium);
    }
    
    .result-content {
      margin-bottom: var(--space-12);
    }
    
    .result-section {
      margin-bottom: var(--space-10);
      opacity: 0;
      
      &:last-child {
        margin-bottom: 0;
      }
      
      h3 {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-semibold);
        margin-bottom: var(--space-4);
        color: var(--color-text);
      }
      
      p {
        font-size: var(--font-size-base);
        line-height: var(--line-height-loose);
        color: var(--color-text);
      }
    }
    
    .result-cta {
      display: flex;
      gap: var(--space-4);
      justify-content: center;
      flex-wrap: wrap;
      opacity: 0;
    }
    
    @media (max-width: 640px) {
      .result-card {
        padding: var(--space-8);
      }
      
      .result-title {
        font-size: var(--font-size-2xl);
      }
      
      .result-cta {
        flex-direction: column;
      }
      
      .result-cta .btn-primary,
      .result-cta .btn-outline {
        width: 100%;
      }
    }
    
    /* Stagger Animation */
    .stagger-item.fade-in {
      animation: fadeInUp 0.5s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
    }
    
    /* Score Overview */
    .score-overview {
      margin-top: var(--space-4);
    }
    
    .score-summary {
      font-size: var(--font-size-base);
      color: var(--color-text-subtle);
      margin-bottom: var(--space-6);
      line-height: var(--line-height-relaxed);
    }
    
    .score-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
      margin-top: var(--space-4);
    }
    
    .score-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-3) var(--space-4);
      background: var(--color-surface);
      border-radius: var(--radius-sm);
      border: 1px solid var(--color-border);
    }
    
    .score-type {
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      color: var(--color-text);
    }
    
    .score-value {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
      color: var(--color-text);
    }
    
    .combination-description {
      margin-top: var(--space-6);
    }
    
    .combination-text {
      font-size: var(--font-size-base);
      line-height: var(--line-height-loose);
      color: var(--color-text);
      
      strong {
        color: var(--color-text);
        font-weight: var(--font-weight-semibold);
      }
    }
  }
  
  /* ============================================
   * Notification
   * ============================================ */
  
  .notification {
    position: fixed;
    top: var(--space-8);
    left: 50%;
    transform: translateX(-50%) translateY(-100%);
    background: var(--color-text);
    color: var(--color-surface);
    padding: var(--space-4) var(--space-8);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    z-index: var(--z-index-modal);
    transition: transform var(--transition-smooth), opacity var(--transition-smooth);
    opacity: 0;
    
    &.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  }
  
  /* ============================================
   * Error Message
   * ============================================ */
  
  .error-message {
    background: color-mix(in srgb, var(--color-error) 10%, var(--color-surface));
    color: var(--color-error);
    padding: var(--space-6);
    border-radius: var(--radius-md);
    margin: var(--space-8);
    border: 1px solid color-mix(in srgb, var(--color-error) 30%, transparent);
    text-align: center;
  }
  
  /* ============================================
   * Accessibility
   * ============================================ */
  
  @media (prefers-reduced-motion: reduce) {
    .identity-test *,
    .identity-test *::before,
    .identity-test *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
}
